<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Example Firebase</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <style>
        body {
            margin-top: 25px;
        }
    </style>
</head>
<body ng-app="example" >
    <div class="container">

    </div>

    <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.14/angular.min.js"></script>
    <script language="javascript" src="https://cdn.firebase.com/js/client/2.2.2/firebase.js"></script>

    <script >
    (function( ng ){
        'use strict';
        ng.module('example', []);

    })( angular );

    (function( ng, app) {

        app.service('RestService', RestService);

        function RestService() {
            var self = this;

            var db = new Firebase('https://luminous-heat-3041.firebaseio.com/');

            var onceValue = function(snapshot){

            };

            var onChildAdded = function(snapshot){

            };

            var onChildRemoved = function(snapshot){

            };

            var onChildMoved = function(snapshot){

            };

            var onChildChanged = function(snapshot){

            };



            db.once("value", onceValue, self);
            db.on('child_added', onChildAdded, self);
            db.on('child_changed', onChildChanged, self);
            db.on('child_removed', onChildRemoved, self);
            db.on('child_moved', onChildMoved, self);

            db.off('child_added', onChildAdded, self);
            db.off('child_changed', onChildChanged, self);
            db.off('child_removed', onChildRemoved, self);
            db.off('child_moved', onChildMoved, self);


            return {
                getHosts: getHosts,
                getOperationalStatuses: getOperationalStatuses
            };

            function guid() {
                function s4() {
                    return Math.floor((1 + Math.random()) * 0x10000)
                            .toString(16)
                            .substring(1);
                }
                return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
                        s4() + '-' + s4() + s4() + s4();
            }

            function getHosts() {
                var max = (Math.random() * 2000) + 30;
                var data = [];
                for (var index = 1; index <= max; index++) {
                    var host = ((( index % 2 ) == 0 ) ? 'pn' : 'ny' ) + ((( index % 3 ) == 0 ) ? 'y' : 'r' ) + ( index % 5 ) + '00' + index;
                    var hw = ((( index % 2 ) == 0 ) ? 'ibm' : 'sun' ) + guid().replace('-', '');
                    var grid = '' + '/' + '';

                    data[data.length] = {id: index, hostId: index, hostName: host, grid: grid, hardware: hw, checked: false};
                }

                return data;
            }

            function getOperationalStatuses(){
                var data = [];

                data[0] = { id: 1, name: 'Done - Live', color: 'white', ordinal: 0 };
                data[1] = { id: 2, name: 'QA Complete', color: 'purple', ordinal: 0 };
                data[2] = { id: 3, name: 'BB Env Up', color: 'green', ordinal: 0 };
                data[3] = { id: 4, name: 'OS Only Up', color: 'turquoise', ordinal: 0 };
                data[4] = { id: 5, name: 'OS Down', color: 'yellow', ordinal: 0 };
                data[5] = { id: 6, name: 'Power Off', color: 'black', ordinal: 0 };
                data[6] = { id: 7, name: 'Maintenance', color: 'orange', ordinal: 0 };
                data[7] = { id: 8, name: 'Error', color: 'red', ordinal: 0 };

                return data;
            }

        }

    })( angular, angular.module('example') );

    </script>

    <script language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.min.js"></script>
</body>
</html>
